#summary Something about Linux

= multi core CPU =

指定 2~4 CPU 執行特定工作，留下 1 CPU 閒置，可以避免 CPU 被該作業完全鎖死

{{{
sudo taskset -c 1,2,3 /etc/init.d/apache2 restart
}}}

= 設定自己的時區 =

{{{
export TZ="/usr/share/zoneinfo/Asia/Tapei"
}}}

= 刪除超過多久的檔案 =
{{{
cd /home/webuser/NA/sessions; find -cmin +2880 | xargs rm
}}}

= change the resolution =

{{{
; This will show the resolutions possible on your monitor
xrandr

; This will immediately change the resolution; in this case to 1024x760.
xrandr -s 1024x760
}}}


= YUM =

{{{
yum search ImageMagick
yum install ImageMagick
yum update ImageMagick
yum remove ImageMagick

#清除暫存檔
yum clean all

#列出已安裝的套件
yum list installed

#列出可以更新的套件
yum list updates
}}}

= PHP on CentOS 5.3 =

{{{
yum install php
yum install php-pear
yum install php-mbstring
yum update curl
}}}

== pecl ==

{{{
#yum install php-pear
#yum install gcc
#pecl channel-update pear.php.net
pecl install json
}}}

== timezone ==

{{{
yum install ntp
rm /etc/localtime
cp -a /usr/share/zoneinfo/Asia/Taipei /etc/localtime
}}}

{{{
vim /etc/sysconfig/clock
ZONE="America/Los_Angeles"
UTC=false
ARC=false
}}}

{{{
vim /etc/php.ini
date.timezone = Asia/Taipei
}}}

= Virtual Box = 

== 螢幕解析度 ==

ref: http://forums.virtualbox.org/viewtopic.php?f=3&t=15679

Edit the `/etc/X11/xorg.conf` and add something like this.
{{{
Section "Screen"
       Identifier "Screen0"
       Device     "Videocard0"
       DefaultDepth     24
       SubSection "Display"
               Viewport   0 0
               Depth     24
               Modes    "1750x1090" "1600x1200" "1600x1024" "1440x900" "1400x1050" "1280x1024" "1280x960" "1280x800" "1152x864" "1152x768" "1024x768" "800x600" "640x480"
       EndSubSection
EndSection
}}}

== console resolution ==
Edit `/etc/grub.conf`, Add `vga=791`

{{{
title CentOS (2.6.18-53.1.19.el5PAE)
  root (hd0,0)
  kernel /vmlinuz-2.6.18-53.1.19.el5PAE ro root=/dev/VolGroup00/LogVol00 console=ttyS0,57600 console=tty0 vga=791
  initrd /initrd-2.6.18-53.1.19.el5PAE.img
}}}

= .screenrc =

{{{
caption always "%{= bk} %{= bY} [%n]%t @ %H %{-} %= %{= bR} %l %{-} | %{= KG} %Y-%m-%d %{-} "
hardstatus alwayslastline " %-Lw%{= Bw}%n%f %t%{-}%+Lw %=| %0c:%s "
bindkey -d -k kb stuff "\010"

#bindkey \033[D prev
#bindkey \033[D next

#caption always "%{.KW} %-w%{.mW}[%n] %t%{.KW}%+w"
#hardstatus alwayslastline "%{R}[ %{w}%1` %{R}]%=%{M}%e %{G}"

#termcapinfo xterm "Co#256:AB=\E[48;5;%dm:AF=\E[38;5;%dm"
#term $TERM # depend on $TERM
#term xterm # or specified term
}}}

= .vimrc =

{{{

"gvim setting
"colorscheme desert
"set guifont=mingliu:h12

"security
set nomodeline


" 游標移動後, 一樣可以用 backspace, del 等刪除動作
set bs=2

" 過長不要斷行
set nowrap

" 搜尋到的字加 hilight
set hlsearch
set incsearch

" 忽略大小寫, 都可以搜尋到
"set ignorecase

" terminal title 會設為 filename
set title

set runtimepath=~/.vim,$VIMRUNTIME
set history=50

filetype on
"set path+=/home/y/share/pear
"set path+=/var/phplib
set number
set cindent
"set autoindent
"set smartindent

" \t 會以 4個空格代替
set expandtab
set shiftwidth=4

set softtabstop=4
set tabstop=4

" :sp 開檔時, 上面會列出所有檔案
set wildmenu

" 可以用 {{{ }}} 縮排 Folded
set foldmarker={{{,}}}
set foldmethod=marker

" Remove trailing whitespaces
" map \ :%s/[     ]*$//g
map \ :%s/\s*$//g

" {{{ syntax highlight
syntax on
":highlight 可以看到所有的顏色
" 顏色 Templates
"colorscheme default
"colorscheme desert
"hi Comment ctermbg=black ctermfg=darkcyan
"hi Comment ctermbg=7 ctermfg=0 term=reverse cterm=reverse
"hi Comment ctermfg=darkcyan
hi Comment term=standout cterm=bold ctermfg=0
" /usr/share/vim/vim70/colors/desert.vim
highlight Search term=reverse ctermbg=3 ctermfg=0
highlight Normal ctermbg=black ctermfg=white
"highlight Folded term=bold ctermbg=2 ctermfg=7
highlight Folded ctermbg=black ctermfg=darkcyan

hi Cursor ctermbg=Gray ctermfg=Blue
"hi Visual ctermbg=yellow ctermfg=blue
"hi Visual cterm=bold ctermbg=darkcyan ctermfg=yellow
highlight clear SpellBad
highlight SpellBad term=underline cterm=underline ctermfg=red
"set background=light
"colorscheme desert
" }}}

" {{{ 下面出現一列 bar.
set ls=2
set statusline=%<%f\ %m%=\ %h%r\ %-19([%p%%]\ %3l,%02c%03V%)%y
"highlight StatusLine ctermfg=2 ctermbg=0
"highlight StatusLine ctermfg=blue ctermbg=white
highlight StatusLine term=bold,reverse cterm=bold,reverse
" }}}
" {{{ 像 ultraedit 一樣有一列的顏色
" Line highlight
set cursorline
" Column highlight
" set cursorcolumn
"highlight CursorLine cterm=none ctermbg=blue
"highlight CursorLine cterm=none ctermbg=7 ctermfg=0
"highlight CursorLine cterm=none ctermbg=4 ctermfg=7
highlight CursorLine cterm=none ctermbg=4
" }}}
" {{{ UTF-8 Big5 Setting
" 檔案存檔會存成utf-8編碼
" "set fileencoding=utf-8
" "
" " 以下四個設下去. vim 編出來都是 utf-8 編碼的.
"set fileencoding=utf-8
"set fileencodings=big5,utf-8
"set termencoding=utf-8
"設定自動轉換為 UTF-8 編碼
" vim 新開的檔案預設是 utf-8 編碼(寫檔)
set fileencoding=utf-8
" vim 新開的檔案預設是 utf-8 編碼(讀檔)
set fileencodings=utf-8,big5,euc-jp,gbk,euc-kr,utf-bom,iso8859-1
" 內部在用的encode(vim 內部在用的 encode)
set encoding=utf8
set tenc=utf8
" 使用 <F12> 來將文字編碼轉換成 Big5
map <F12> :set tenc=big5<cr>

" vim 啟動後，是使用 utf-8 編碼
" 所有可能的編碼

" set termencoding=big5
" 當 Terminal.app 的 Display > encoding 是設成 Big5-hkscs，也就是說 terminal
" 會把鍵盤的輸入以 big5 編碼方式送到 vim 時，vim 需要有這個設定，才會將 big5 的輸入
" 轉成上面設定的 utf-8 編碼。如果你的 Terminal.app 是用 utf-8
" 編碼，則可忽略此項。
" }}}
" {{{ For PHP Hot Key
" Map ; to run PHP parser check
"noremap ; :!php -l %<CR>
" Map <CTRL>-P to run actual file with PHP CLI
"noremap <C-P> :w!<CR>:!php %<CR>
" Map <CTRL>-M to search phpm for the function name currently under the cursor (insert mode only)
"inoremap <C-H> <ESC>:!phpm <C-R>=expand("<cword>")<CR><CR>
" Automatic close char mapping
"inoremap  { {<CR>}<C-O>O
"inoremap [ []<LEFT>
"inoremap ( ()<LEFT>
"inoremap " ""<LEFT>
"inoremap ' ''<LEFT>
" }}}
" {{{ 直接按 F8 (Tlist, function list)
"source $HOME/.vim/phpdoc.vim
"ctags apt-get install exuberant-ctags
" }}}
" {{{ ctrl + n, ctrl + p(會自動把function列出)
set dictionary-=~/.vim/funclist.txt
set complete-=k complete+=k
" }}}
" {{{ 會自動到最後離開的位置
if has("autocmd")
    autocmd BufRead *.txt set tw=78
    autocmd BufReadPost *
    \ if line("'\"") > 0 && line ("'\"") <= line("$") |
    \   exe "normal g'\"" |
    \ endif
endif
" }}}
" {{{ save .vimrc, auto exec, .vimrc 如果存檔, 就會立刻實現

autocmd! bufwritepost .vimrc source %
" }}}
" {{{ mail 的話自動開啟 spell 功能
"autocmd FileType mail setlocal spell
" }}}
highlight TabLine ctermbg=blue
highlight TabLineFill ctermbg=green
highlight TabLineSel ctermbg=red
}}}